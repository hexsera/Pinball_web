# 회원 테이블 UI 실행계획

## 요구사항 요약

**요구사항**: 관리자의 회원관리를 위해 회원 목록을 보여줄 테이블 UI 생성

**목적**: 관리자의 운영 능력을 높이기 위해 회원 정보를 한눈에 확인하고 관리할 수 있는 화면 필요

## 현재상태 분석

- AdminPage.jsx 구조: AdminHeader + AdminSidebar + AdminMain 조합 (Flexbox)
- AdminHeader, AdminSidebar는 재사용 가능한 컴포넌트로 구현되어 있음
- AdminMain은 현재 임시 이미지만 표시 중
- FastAPI에 GET /api/v1/users 엔드포인트 존재 (전체 회원 목록 조회, API Key 필요)
- UserResponse 스키마: id, email, nickname, birth_date, role

## 구현 방법

- MUI DataGrid 컴포넌트를 사용하여 테이블 UI 구현 (업계 표준)
- AdminPage.jsx 구조를 그대로 따라 새로운 페이지 생성
- AdminHeader, AdminSidebar 컴포넌트 재사용
- axios로 FastAPI GET /api/v1/users API 호출하여 회원 데이터 조회
- 새로운 라우트 /admin/users 추가

## 구현 단계

### 1. AdminUserMain.jsx 생성 (빈 컴포넌트)
```javascript
import { Box, Toolbar, Container, Typography } from '@mui/material';

const drawerWidth = 260;

function AdminUserMain() {
  return (
    <Box
      component="main"
      sx={{
        flexGrow: 1,
        p: 3,
        width: { sm: `calc(100% - ${drawerWidth}px)` },
        backgroundColor: '#F9FAFB',
        minHeight: '100vh',
      }}
    >
      <Toolbar />
      <Container maxWidth="xl">
        <Typography variant="h5" sx={{ mb: 3, fontWeight: 'bold' }}>
          회원 관리
        </Typography>
      </Container>
    </Box>
  );
}

export default AdminUserMain;
```
- **무엇을 하는가**: 회원 관리 페이지의 메인 영역 틀을 먼저 생성
- AdminMain.jsx와 동일한 레이아웃 스타일 적용
- 테이블 없이 제목만 표시하는 빈 컴포넌트

### 2. AdminUserPage.jsx 생성 (회원 관리 페이지)
```javascript
import { Box } from '@mui/material';
import AdminHeader from './AdminHeader';
import AdminSidebar from './AdminSidebar';
import AdminUserMain from './AdminUserMain';

function AdminUserPage() {
  return (
    <Box sx={{ display: 'flex' }}>
      <AdminHeader />
      <AdminSidebar />
      <AdminUserMain />
    </Box>
  );
}

export default AdminUserPage;
```
- **무엇을 하는가**: AdminPage.jsx 구조를 그대로 따르며 AdminMain 대신 AdminUserMain 사용
- AdminHeader, AdminSidebar 컴포넌트 재사용
- Flexbox 레이아웃으로 3개 컴포넌트 조합

### 3. App.jsx에 라우트 추가
```javascript
import AdminUserPage from './admin/AdminUserPage';

// Routes 내부에 추가
<Route path="/admin/users" element={<AdminUserPage/>} />
```
- **무엇을 하는가**: /admin/users 경로로 회원 관리 페이지 접근 가능하게 설정
- 기존 /admin 라우트 아래에 추가

### 4. MUI DataGrid 패키지 설치
```bash
npm install @mui/x-data-grid
```
- **무엇을 하는가**: MUI의 데이터 테이블 컴포넌트 설치
- DataGrid는 정렬, 페이지네이션, 필터링 등 기본 기능 제공

### 5. AdminUserMain.jsx에 회원 테이블 추가
```javascript
import { useState, useEffect } from 'react';
import { Box, Toolbar, Container, Typography } from '@mui/material';
import { DataGrid } from '@mui/x-data-grid';
import axios from 'axios';

const drawerWidth = 260;

// 테이블 컬럼 정의
const columns = [
  { field: 'id', headerName: 'ID', width: 70 },
  { field: 'email', headerName: '이메일', width: 200 },
  { field: 'nickname', headerName: '닉네임', width: 130 },
  { field: 'birth_date', headerName: '생년월일', width: 130 },
  { field: 'role', headerName: '역할', width: 100 },
];

function AdminUserMain() {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchUsers = async () => {
      try {
        const response = await axios.get('/api/v1/users', {
          headers: { 'X-API-Key': 'hexsera-secret-api-key-2026' }
        });
        setUsers(response.data);
      } catch (error) {
        console.error('회원 목록 조회 실패:', error);
      } finally {
        setLoading(false);
      }
    };
    fetchUsers();
  }, []);

  return (
    <Box
      component="main"
      sx={{
        flexGrow: 1,
        p: 3,
        width: { sm: `calc(100% - ${drawerWidth}px)` },
        backgroundColor: '#F9FAFB',
        minHeight: '100vh',
      }}
    >
      <Toolbar />
      <Container maxWidth="xl">
        <Typography variant="h5" sx={{ mb: 3, fontWeight: 'bold' }}>
          회원 관리
        </Typography>
        <Box sx={{ height: 600, width: '100%', backgroundColor: '#ffffff', borderRadius: 2, p: 2 }}>
          <DataGrid
            rows={users}
            columns={columns}
            loading={loading}
            pageSizeOptions={[10, 25, 50]}
            initialState={{ pagination: { paginationModel: { pageSize: 10 } } }}
            disableRowSelectionOnClick
          />
        </Box>
      </Container>
    </Box>
  );
}

export default AdminUserMain;
```
- **무엇을 하는가**: 빈 컴포넌트에 회원 테이블 기능 추가
- useState로 users(회원 목록), loading(로딩 상태) 관리
- useEffect로 컴포넌트 마운트 시 API 호출
- DataGrid의 rows에 회원 데이터, columns에 컬럼 정의 전달

## 수정/생성할 파일 목록

| 파일 경로 | 작업 유형 | 변경 내용 |
|-----------|-----------|-----------|
| react/main/src/admin/AdminUserMain.jsx | 생성 | 회원 테이블 컴포넌트 |
| react/main/src/admin/AdminUserPage.jsx | 생성 | 회원 관리 페이지 |
| react/main/src/App.jsx | 수정 | /admin/users 라우트 추가 |
| react/main/package.json | 수정 | @mui/x-data-grid 의존성 추가 |

## 완료 체크리스트

- [ ] npm install @mui/x-data-grid 실행 완료
- [ ] /admin/users 경로로 접속 시 회원 관리 페이지 표시
- [ ] 페이지에 AdminHeader, AdminSidebar가 정상 표시
- [ ] 회원 목록 테이블에 ID, 이메일, 닉네임, 생년월일, 역할 컬럼 표시
- [ ] API 호출 후 회원 데이터가 테이블에 정상 렌더링
- [ ] 테이블 페이지네이션 동작 (10, 25, 50개 단위)
- [ ] 에러 없이 빌드 완료 (npm run build)
