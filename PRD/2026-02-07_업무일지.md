# 업무일지

## 기본 정보
- 날짜: 2026-02-07 (금) 10:00~10:30
- 작성자: hexsera

## 진행 목표
frontend(React)에 TDD(Test-Driven Development) 구조를 구축하여 앞으로 새로운 기능 개발 시 테스트 우선 개발 방식을 적용할 수 있는 환경을 만든다.

## 진행 내용

| 작업 | 수정 파일 | 비고 |
|------|----------|------|
| TDD 구조 실행계획 작성 | PRD/TDD-구조생성-실행계획.md | Vitest 기반 TDD 구조 설계 |
| 테스트 패키지 설치 | frontend/package.json | vitest, @testing-library/react 등 5개 패키지 설치 |
| Vitest 설정 파일 생성 | frontend/vitest.config.js | jsdom 환경, globals, setupFiles 설정 |
| 테스트 셋업 파일 생성 | frontend/src/test/setup.js | jest-dom 매처 전역 등록 |
| 테스트 스크립트 추가 | frontend/package.json | test, test:run, test:ui 명령어 추가 |
| 샘플 테스트 작성 | frontend/src/test/sample.test.jsx | TDD 구조 검증용 테스트 |
| 테스트 실행 검증 | - | 1개 테스트 통과 확인 |

## 주요 변경 사항

### 1. frontend/package.json 수정

**변경 전:**
```json
"scripts": {
  "start": "vite",
  "build": "vite build"
},
"devDependencies": {
  "@vitejs/plugin-react": "^5.1.2",
  "vite": "^7.3.0"
}
```

**변경 후:**
```json
"scripts": {
  "start": "vite",
  "build": "vite build",
  "test": "vitest",
  "test:run": "vitest run",
  "test:ui": "vitest --ui"
},
"devDependencies": {
  "@testing-library/jest-dom": "^6.9.1",
  "@testing-library/react": "^16.3.2",
  "@testing-library/user-event": "^14.6.1",
  "@vitejs/plugin-react": "^5.1.2",
  "@vitest/ui": "^4.0.18",
  "jsdom": "^28.0.0",
  "vite": "^7.3.0",
  "vitest": "^4.0.18"
}
```

**특징:**
- 테스트 실행을 위한 3개의 npm 스크립트 추가
- `test`: watch 모드로 테스트 실행 (파일 변경 시 자동 재실행)
- `test:run`: 한 번만 실행하고 종료 (CI/CD 환경용)
- `test:ui`: 브라우저에서 시각적으로 테스트 결과 확인
- vitest 및 React Testing Library 관련 패키지 5개 추가

### 2. frontend/vitest.config.js 생성

**추가:**
```javascript
import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  test: {
    environment: 'jsdom',
    globals: true,
    setupFiles: './src/test/setup.js',
  },
});
```

**특징:**
- `environment: 'jsdom'`: 브라우저 없이 DOM 환경 시뮬레이션
- `globals: true`: describe, it, expect 등을 import 없이 사용 가능
- `setupFiles`: 모든 테스트 실행 전 setup.js 자동 실행
- Vite의 React 플러그인 재사용하여 별도의 Babel 설정 불필요

### 3. frontend/src/test/setup.js 생성

**추가:**
```javascript
import '@testing-library/jest-dom';
```

**특징:**
- jest-dom 매처를 전역으로 등록
- `toBeInTheDocument()`, `toBeVisible()`, `toHaveTextContent()` 등 DOM 전용 매처 사용 가능
- vitest.config.js의 setupFiles 설정에 의해 모든 테스트 실행 전 자동 실행

### 4. frontend/src/test/sample.test.jsx 생성

**추가:**
```javascript
import { render, screen } from '@testing-library/react';
import { describe, it, expect } from 'vitest';

describe('TDD 구조 검증', () => {
  it('테스트 환경이 정상적으로 작동한다', () => {
    render(<div>테스트 성공</div>);
    expect(screen.getByText('테스트 성공')).toBeInTheDocument();
  });
});
```

**특징:**
- TDD 구조가 올바르게 설정되었는지 검증하는 샘플 테스트
- `render()`: JSX를 가상 DOM에 렌더링
- `screen.getByText()`: 렌더링된 화면에서 텍스트로 요소 찾기
- `toBeInTheDocument()`: 요소가 DOM에 존재하는지 확인 (jest-dom 매처)

### 5. PRD/TDD-구조생성-실행계획.md 생성

**추가:**
- 요구사항 요약: TDD 구조 생성 목적 명시
- 현재상태 분석: 테스트 프레임워크 미설치 상태 확인
- 구현 방법: Vitest + React Testing Library 선정 이유
- 구현 단계: 6단계 상세 절차 (패키지 설치 → 설정 → 검증)
- 수정/생성할 파일 목록: 4개 파일
- 완료 체크리스트: 3개 항목

**특징:**
- Vitest 선정 이유: Vite 기반 프로젝트의 표준 테스트 프레임워크
- Jest 호환 API 제공으로 학습 곡선 낮음
- 별도의 Babel/Webpack 설정 불필요

## 아키텍처 구조

### TDD 테스트 실행 흐름

```
npm test 실행
    │
    ▼
vitest.config.js 로드
    │
    ├─→ environment: 'jsdom' 설정
    ├─→ globals: true 설정
    └─→ setupFiles 실행
            │
            ▼
    src/test/setup.js 실행
            │
            ▼
    @testing-library/jest-dom 매처 등록
            │
            ▼
    *.test.jsx 파일 스캔
            │
            ▼
    테스트 실행 및 결과 출력
```

### 프로젝트 디렉토리 구조 (테스트 관련)

```
frontend/
├── package.json (test 스크립트 추가)
├── vitest.config.js (Vitest 설정)
└── src/
    └── test/
        ├── setup.js (jest-dom 전역 등록)
        └── sample.test.jsx (샘플 테스트)
```

## 결과
- 상태: 완료

## 배운내용


## 다음 작업
- 복잡한 컴포넌트(AuthContext, Pinball 등) 테스트 작성 시 추가 mocking 전략 수립 필요
