# 핀볼 범퍼 꾸미기 실행계획

## 요구사항 요약

**요구사항**: 핀볼 게임의 범퍼를 일반적인 핀볼 게임의 범퍼처럼 시각적으로 꾸민다.

**목적**: 현재 범퍼는 단색 원으로만 표시되어 있어 시각적 매력이 없다. 실제 핀볼 기계처럼 외곽 링과 중앙 하이라이트가 구분되는 스타일로 개선하여 게임의 몰입감을 높인다.

## 현재상태 분석

- `stageConfigs.js`의 범퍼 옵션: `render: { fillStyle: '#e74c3c' }` 단색만 지정
- 스테이지마다 범퍼 옵션이 개별 객체에 중복 작성되어 있음 (변경 시 모든 범퍼 수정 필요)
- Matter.js의 `render` 옵션은 `fillStyle`, `strokeStyle`, `lineWidth`, `opacity` 지원
- `loadStageMap`에서 범퍼를 `Bodies.circle(b.x, b.y, b.radius, b.options)`으로 생성

## 구현 방법

공유 스타일을 `BUMPER_OPTIONS` 상수 객체로 분리하여 모든 범퍼가 이를 참조하도록 한다. Matter.js의 `strokeStyle`, `lineWidth`로 외곽 링을 표현하고, 물리 충돌 없는 센서 원(`isSensor: true`)을 범퍼 중앙에 겹쳐 흰색 하이라이트 효과를 표현한다.

## 구현 단계

### 1. stageConfigs.js - BUMPER_OPTIONS 공유 상수 정의

```javascript
// 파일 상단에 추가
export const BUMPER_RADIUS = 30;

export const BUMPER_OPTIONS = {
  isStatic: true,
  restitution: 1.5,
  label: 'bumper',
  render: {
    fillStyle: '#c0392b',    // 짙은 빨강 (범퍼 몸체)
    strokeStyle: '#ff6b6b',  // 밝은 빨강 (외곽 링)
    lineWidth: 5
  }
};

export const BUMPER_HIGHLIGHT_OPTIONS = {
  isStatic: true,
  isSensor: true,
  label: 'bumperHighlight',
  render: {
    fillStyle: 'rgba(255, 255, 255, 0.55)',
    strokeStyle: 'transparent',
    lineWidth: 0
  }
};
```
- `BUMPER_OPTIONS`: 모든 범퍼가 공유하는 물리/렌더 속성 단일 정의
- `BUMPER_HIGHLIGHT_OPTIONS`: `isSensor: true`로 충돌 없이 시각적 역할만 수행
- 상수를 export하여 `Pinball.jsx`에서 임포트 가능하게 함

### 2. stageConfigs.js - 범퍼 배치 데이터를 공유 상수 사용으로 교체

```javascript
import { BUMPER_OPTIONS, BUMPER_RADIUS } from './stageConfigs'; // 내부 참조

// Stage 1 - 범퍼 3개 삼각형 배치, options 직접 기입 대신 공유 상수 사용
bumpers: [
  { x: 250, y: 350, radius: BUMPER_RADIUS, options: BUMPER_OPTIONS },
  { x: 400, y: 280, radius: BUMPER_RADIUS, options: BUMPER_OPTIONS },
  { x: 550, y: 350, radius: BUMPER_RADIUS, options: BUMPER_OPTIONS }
]
```
- 각 범퍼의 `options`에 인라인 객체 대신 `BUMPER_OPTIONS` 상수를 그대로 참조
- 스타일 변경 시 `BUMPER_OPTIONS` 한 곳만 수정하면 모든 범퍼에 반영됨
- Stage 2도 동일한 방식으로 교체

### 3. stageConfigs.js - 하이라이트 센서 원 배치 데이터 추가

```javascript
// 각 스테이지 config에 highlights 배열 추가
highlights: [
  { x: 250, y: 340, radius: 10, options: BUMPER_HIGHLIGHT_OPTIONS },
  { x: 400, y: 270, radius: 10, options: BUMPER_HIGHLIGHT_OPTIONS },
  { x: 550, y: 340, radius: 10, options: BUMPER_HIGHLIGHT_OPTIONS }
]
```
- 하이라이트 원의 x,y는 범퍼보다 y를 10px 위로 설정하여 상단 광택 위치 표현
- `radius: 10`으로 범퍼(`radius: 30`) 내부에 작게 표시

### 4. Pinball.jsx - loadStageMap에 highlights 생성 로직 추가

```javascript
// loadStageMap 함수 내 기존 bumpers 생성 로직 아래에 추가
config.highlights?.forEach((h) => {
  const body = Bodies.circle(h.x, h.y, h.radius, h.options);
  newBodies.push(body);
});
```
- `config.highlights`가 없는 스테이지를 위해 `?.` 옵셔널 체이닝 사용
- `newBodies`에 추가하여 스테이지 전환 시 함께 제거/생성됨

## 수정/생성할 파일 목록

| 파일 경로 | 작업 유형 | 변경 내용 |
|-----------|-----------|-----------|
| `frontend/src/stageConfigs.js` | 수정 | `BUMPER_OPTIONS`, `BUMPER_HIGHLIGHT_OPTIONS` 상수 추가, 범퍼 배치 재설계, highlights 배열 추가 |
| `frontend/src/Pinball.jsx` | 수정 | `loadStageMap`에 highlights 생성 로직 추가 |

## 완료 체크리스트

- [ ] 범퍼에 외곽 링(붉은 테두리)이 표시되는지 확인
- [ ] 범퍼 3개가 삼각형 형태로 배치되어 있는지 확인
- [ ] 범퍼 중앙 상단에 반투명 흰색 하이라이트 원이 표시되는지 확인
- [ ] `BUMPER_OPTIONS`의 색상을 변경했을 때 모든 범퍼에 동시 반영되는지 확인
- [ ] 스테이지 전환 시 하이라이트 원도 함께 제거/생성되는지 확인
- [ ] 브라우저 콘솔에 에러 없이 실행되는지 확인
