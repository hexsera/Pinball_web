# 프로젝트 마무리 문서화 실행계획

## 요구사항 요약


**목적**: 프로젝트의 기술 구조와 운영 방법을 기록하여, 이후 유지보수 또는 포트폴리오 참고 시 재학습 비용을 줄인다.

---

## 현재상태 분석

- `README.md`: 이미 존재하나 기술 스택 일부 오류(MySQL 주DB로 표기, 실제 주DB는 PostgreSQL), 디렉토리 구조·API 설명 없음
- `docs/` 디렉토리: 존재하나 `logs/`, `prd/` 폴더만 있고 회고·배포 가이드 없음
- `PRD/` 디렉토리: 기존 PRD·실행계획·업무일지 파일 다수 존재
- `docker-compose.yml`: traefik, nginx, fastapi, postgres, mysql(레거시) 5개 서비스 정의
- 백엔드: FastAPI + SQLAlchemy + Alembic, 5개 테이블(users, scores, friendships, monthly_scores, game_visits)
- 프론트엔드: React/Vite, 8개 페이지(Dashboard, FriendPage, HomePage, Login, Pinball, PinballPage, Register, UserInfo, admin)

---

## 구현 방법

마크다운(.md) 형식으로 문서를 직접 작성한다. 코드 자동 생성 없이 현재 코드베이스를 분석한 내용을 수작업으로 정리한다. 회고·배포 가이드는 `docs/` 디렉토리에 신규 생성한다.

---

## 구현 단계

### 1. README.md 재작성

프로젝트의 첫 진입점이 되는 README를 재작성한다. 현재 README에는 DB 표기 오류가 있고 디렉토리 구조, API 개요, 로컬 실행 방법이 누락되어 있다. 전체 코드베이스와 기존 README를 조사하여, 처음 접하는 개발자가 프로젝트를 빠르게 이해하고 로컬에서 실행할 수 있도록 README를 작성한다.

작성 항목: 프로젝트 소개, 기술 스택 테이블, 디렉토리 구조, 로컬 실행 방법, 아키텍처 개요

### 2. 회고 문서 작성 (docs/retrospective.md)

프로젝트 전반의 경험과 교훈을 기록하는 회고 문서를 작성한다. 기존에 작성된 업무일지와 실행계획 문서들을 조사하여 타임라인, 기술적 의사결정의 배경, 트러블슈팅 사례, 잘된 점과 아쉬운 점을 정리한다. 이 문서는 향후 유사 프로젝트 진행 시 참고 자료로 활용하기 위해 작성한다.

작성 항목: 프로젝트 개요 및 타임라인, 기술적 의사결정(왜 선택했는가), 트러블슈팅 사례, 잘된 점·아쉬운 점·배운 점

### 3. 배포 가이드 작성 (docs/deployment-guide.md)

이 프로젝트를 실제 서버에 배포하고 운영하는 방법을 기록한다. Docker Compose 구성, 환경 변수 설정, Cloudflare DNS 연동 등 인프라 관련 설정을 조사하여 처음 배포하는 사람도 따라할 수 있는 가이드를 작성한다. 이 문서는 재배포·유지보수 시 참고 매뉴얼로 활용하기 위해 작성한다.

작성 항목: 사전 요구사항, 환경 변수 설정 방법, 초기 배포 절차, DB 마이그레이션, 롤백 방법, 트러블슈팅

### 4. 프론트엔드 사용자 시나리오 정리 (docs/user-scenarios.md)

서비스의 전체 페이지와 사용자 흐름을 문서화한다. 프론트엔드 라우팅 구성과 각 페이지의 역할을 조사하여, 사용자 유형(비로그인·로그인·관리자)별로 어떤 경로로 서비스를 이용하는지 시나리오 형태로 작성한다. 이 문서는 서비스 기능을 한눈에 파악하고 QA·기획 참고 자료로 활용하기 위해 작성한다.

작성 항목: 라우트 및 페이지 목록, 사용자 유형별 시나리오(회원가입·게임·친구·계정관리·탈퇴·관리자)

### 5. 백엔드 API·DB 가이드 작성 (docs/backend-guide.md)

백엔드의 API 구조와 데이터베이스 스키마를 문서화한다. 전체 API 엔드포인트 목록, 각 테이블의 컬럼과 제약조건, 주요 설계 결정의 배경(비정규화, ON DELETE CASCADE 미적용 등)을 조사하여 정리한다. 이 문서는 백엔드 유지보수 및 추가 개발 시 빠르게 구조를 파악하기 위해 작성한다.

작성 항목: 백엔드 프로젝트 구조, API 엔드포인트 목록(메서드·경로·설명), DB 스키마(테이블·컬럼·제약조건·관계), 주요 설계 결정

### 6. 인프라 구조 가이드 작성 (docs/infrastructure-guide.md)

프로젝트의 인프라 구성과 요청 흐름을 문서화한다. Docker Compose로 정의된 서비스 구성, Traefik의 SSL/TLS 및 라우팅 설정, Nginx의 SPA 서빙 방식, 네트워크·볼륨 구성을 조사하여 전체 아키텍처를 설명한다. 이 문서는 인프라 변경·장애 대응 시 구조를 빠르게 파악하기 위해 작성한다.

작성 항목: 전체 아키텍처 다이어그램, 서비스 목록 및 역할, Traefik·Nginx 설정, 네트워크·볼륨 구성, 요청 라우팅 흐름

### 7. 개선 사항 조사 및 정리 (docs/improvement-notes.md)

프로젝트 전반의 미완성·비일관 항목을 조사하여 개선 사항을 정리한다. 폴더 구조, API 설계, 프론트엔드 코드 품질 측면에서 잠재적 문제점이나 개선 여지를 파악하고, 향후 리팩토링 또는 기능 개선 시 참고할 수 있도록 기록한다. 이 문서는 현재 상태를 솔직하게 기록하여 기술 부채를 명시적으로 관리하기 위해 작성한다.

작성 항목: 폴더 구조 개선 사항, API 설계 개선 사항(버전 일관성·인증·에러 처리 등), 프론트엔드 개선 사항(환경변수·라우트 가드·코드 일관성 등)

---

## 수정/생성할 파일 목록

| 파일 경로 | 작업 유형 | 변경 내용 |
|-----------|-----------|-----------|
| `README.md` | 수정 | DB 오류 수정, 디렉토리 구조·API 개요·로컬 실행 방법 추가 |
| `docs/retrospective.md` | 생성 | 타임라인, 기술 의사결정, 트러블슈팅, 회고 |
| `docs/deployment-guide.md` | 생성 | 사전 요구사항, 환경 변수, 배포 절차, 마이그레이션, 롤백 |
| `docs/user-scenarios.md` | 생성 | 라우트 목록, 사용자 유형별 시나리오 7개 |
| `docs/backend-guide.md` | 생성 | API 엔드포인트 목록, DB 스키마, 주요 설계 결정 |
| `docs/infrastructure-guide.md` | 생성 | 아키텍처 다이어그램, 서비스 역할, Traefik·Nginx 설정, 네트워크·볼륨 구성 |
| `docs/improvement-notes.md` | 생성 | 폴더 구조·API·프론트엔드 개선 사항 조사 결과 정리 |

---

## 완료 체크리스트

- [ ] README.md에서 주 DB가 PostgreSQL로 올바르게 표기되어 있다
- [ ] README.md에 로컬에서 `docker compose up -d` 실행 절차가 명시되어 있다
- [ ] README.md에 프론트엔드 로컬 개발 서버 실행 방법(`nvm` 포함)이 작성되어 있다
- [ ] `docs/retrospective.md`에 MySQL → PostgreSQL 전환 배경이 기술되어 있다
- [ ] `docs/retrospective.md`에 pytest testDB 문제 등 실제 트러블슈팅 사례가 1개 이상 포함되어 있다
- [ ] `docs/deployment-guide.md`에 Cloudflare API Token 설정 방법이 포함되어 있다
- [ ] `docs/deployment-guide.md`에 Alembic 마이그레이션 명령어가 포함되어 있다
- [ ] `docs/user-scenarios.md`에 라우트 목록과 사용자 유형별(비로그인/로그인/관리자) 시나리오가 구분되어 있다
- [ ] `docs/user-scenarios.md`에 친구 요청 흐름, 게임 점수 반영, 회원 탈퇴 확인 절차가 포함되어 있다
- [ ] `docs/backend-guide.md`에 전체 API 엔드포인트가 메서드·경로·설명 형태로 정리되어 있다
- [ ] `docs/backend-guide.md`에 4개 테이블(users, friendships, monthly_scores, game_visits) 스키마가 명시되어 있다
- [ ] `docs/backend-guide.md`에 `ON DELETE CASCADE` 미적용 사유와 수동 삭제 처리 방식이 기술되어 있다
- [ ] `docs/infrastructure-guide.md`에 5개 서비스 역할과 포트가 표로 정리되어 있다
- [ ] `docs/infrastructure-guide.md`에 Traefik의 HTTP→HTTPS 리다이렉트 및 Cloudflare DNS Challenge 흐름이 기술되어 있다
- [ ] `docs/infrastructure-guide.md`에 `hexsera.com` → Nginx, `hexsera.com/api/*` → FastAPI 라우팅 규칙이 명시되어 있다
- [ ] `docs/improvement-notes.md`에 폴더 구조 개선 항목이 정리되어 있다 (nginx.conf 중복, .env.example 부재 등)
- [ ] `docs/improvement-notes.md`에 API 개선 항목이 정리되어 있다 (버전 불일치, 인증 누락, 하드코딩 등)
- [ ] `docs/improvement-notes.md`에 프론트엔드 개선 항목이 정리되어 있다 (라우트 가드, axios 직접 호출 등)
- [ ] 7개 파일 모두 실제 파일 경로에 존재하고 열람 가능하다
