# 프론트엔드 사용자 시나리오 정리 실행계획

## 요구사항 요약

**요구사항**: `docs/user-scenarios.md` 파일을 생성하여 전체 페이지·라우트 목록과 사용자 유형별(비로그인·로그인·관리자) 시나리오를 문서화한다.

**목적**: 서비스 기능을 한눈에 파악하고 QA·기획 참고 자료로 활용하기 위해 사용자 흐름을 시나리오 형태로 기록한다.

---

## 현재상태 분석

- `frontend/src/App.jsx`: React Router로 9개 라우트 정의 (`/`, `/dashboard`, `/login`, `/Register`, `/pinball`, `/admin`, `/admin/users`, `/admin/statistics`, `/user/friend`, `/user/account`)
- 인증 상태: `AuthContext` + `localStorage` 기반 세션, `{ id, name, role, email }` 저장
- 라우트 가드 없음: 로그인 여부·역할에 무관하게 모든 경로 접근 가능 (클라이언트 측 미보호)
- 관리자 로그인 시 `/admin`으로, 일반 사용자 로그인 시 `/`로 이동 (`Login.jsx` 내 role 분기)
- 회원가입: 3단계 스텝(이메일·닉네임 → 비밀번호 → 생년월일)
- 회원 탈퇴: Dialog 내 "회원 탈퇴" 텍스트 입력으로 확인 후 삭제
- 친구 기능: 닉네임 검색 → 요청 전송 → 수신자 승인/거절 → 친구 목록 표시
- 점수 반영: 게임 종료 시 `POST /api/v1/monthly-scores` 호출로 당월 점수 저장

---

## 구현 방법

`docs/user-scenarios.md` 마크다운 파일을 신규 생성한다. 코드 자동 생성 없이 `App.jsx`, 각 페이지 컴포넌트 코드를 분석한 내용을 수작업으로 정리한다.

---

## 구현 단계

### 1. 라우트 및 페이지 목록 표 작성

```markdown
| 경로 | 컴포넌트 | 접근 제한 | 설명 |
|------|----------|-----------|------|
| / | HomePage | 없음 | 메인 랜딩 페이지, 이번 달 랭킹 표시 |
| /login | Login | 없음 | 이메일·비밀번호 로그인 |
| /Register | Register | 없음 | 3단계 회원가입 |
| /dashboard | Dashboard | 없음(미보호) | 로그인 유도 또는 좌측 메뉴 안내 |
| /pinball | PinballPage | 없음(미보호) | 핀볼 게임 플레이 화면 |
| /user/friend | FriendPage | 없음(미보호) | 친구 검색·요청·목록 |
| /user/account | UserInfo | 없음(미보호) | 회원 정보 조회·수정·탈퇴 |
| /admin | AdminUserPage | 없음(미보호) | 관리자 회원 관리 |
| /admin/users | AdminUserPage | 없음(미보호) | 관리자 회원 관리 (동일) |
| /admin/statistics | AdminStatisticsPage | 없음(미보호) | 관리자 게임 플레이 통계 |
```
- 실제 라우트 목록과 접근 제한 여부(라우트 가드 미구현 상태)를 명시한다.
- 컴포넌트명과 경로를 1:1 매핑하여 코드 참조를 쉽게 한다.

### 2. 비로그인 사용자 시나리오 작성

```markdown
## 시나리오 A: 비로그인 - 메인 페이지 조회 및 게임 플레이
1. `/` 접속 → 이번 달 랭킹 확인
2. "게임하기" 클릭 → `/pinball` 이동 → 게임 플레이
3. 게임 종료 → 점수 저장 API 호출 시 인증 없으면 저장 안 됨 (비로그인 상태)

## 시나리오 B: 비로그인 - 회원가입
1. `/login` → "회원가입" 버튼 클릭 → `/Register` 이동
2. Step 0: 이메일·닉네임 입력 → "다음"
3. Step 1: 비밀번호·비밀번호확인 입력 → "다음"
4. Step 2: 생년월일(연도·월·일) 입력 → "회원가입" 클릭
5. POST /api/v1/register 호출 → 성공(201) 시 `/login`으로 이동
```
- 라우트 가드가 없으므로 비로그인 사용자도 `/pinball`, `/dashboard` 접근 가능한 점을 명시한다.

### 3. 로그인 사용자 시나리오 작성

```markdown
## 시나리오 C: 로그인
1. `/login` → 이메일·비밀번호 입력 → "로그인"
2. POST /api/v1/login → 성공 시 role 확인
   - role=user → `/` 이동
   - role=admin → `/admin` 이동
3. localStorage에 { id, name, role, email } 저장

## 시나리오 D: 게임 플레이 및 점수 반영
1. `/pinball` 접속 → Matter.js 로딩 완료 후 게임 시작
2. 플리퍼 조작(← → 또는 z/x 키), 5스테이지 진행
3. 목숨 0개 소진 → 게임 오버 → POST /api/v1/monthly-scores 호출 → 당월 점수 저장
4. `/`의 랭킹 테이블에 점수 반영

## 시나리오 E: 친구 요청 흐름
1. `/user/friend` 접속 → 닉네임 검색 → 검색 결과에서 "친구추가" 클릭
2. POST /api/friend-requests → 상대방의 친구 요청 목록에 pending 표시
3. 상대방이 `/user/friend` 접속 → "친구 요청" 섹션에서 승인/거절
   - 승인: POST /api/friend-requests/accept → 양쪽 친구 목록에 표시
   - 거절: POST /api/friend-requests/reject → 요청 목록에서 제거

## 시나리오 F: 계정 관리 및 회원 탈퇴
1. `/user/account` 접속 → 현재 이메일·닉네임·생년월일 조회
2. 닉네임·비밀번호·생년월일 수정 후 "수정" 클릭 → PUT /api/v1/users/{id}
3. 회원 탈퇴: "회원 탈퇴" 버튼 클릭 → Dialog 열림
4. 입력란에 "회원 탈퇴" 텍스트 입력 → "확인" 클릭
5. DELETE /api/v1/users/{id} → 성공 시 logout() 호출 → `/` 이동
```
- 친구 요청의 requester/receiver 구분, 점수 저장 API 경로를 명시한다.

### 4. 관리자 시나리오 작성

```markdown
## 시나리오 G: 관리자 회원 관리
1. role=admin 계정으로 로그인 → `/admin` 자동 이동
2. DataGrid에서 전체 회원 목록 조회 (GET /api/v1/users)
3. 수정 아이콘 클릭 → Dialog에서 닉네임·생년월일·비밀번호·역할 수정
   → PUT /api/v1/users/{id} (X-API-Key 헤더 포함)
4. 삭제 아이콘 클릭 → 확인 Dialog → DELETE /api/v1/users/{id} (X-API-Key 헤더 포함)

## 시나리오 H: 관리자 통계 조회
1. 좌측 사이드바에서 "통계" 클릭 → `/admin/statistics` 이동
2. GET /api/v1/game_visits (최근 2주 날짜 범위) → 일별 방문자 수 조회
3. LineChart로 날짜별 게임 플레이 횟수 시각화
```
- 관리자 API 호출 시 `X-API-Key` 헤더가 필요함을 명시한다.

### 5. docs/user-scenarios.md 파일 생성

```markdown
# docs/user-scenarios.md 파일 구조

1. 개요
2. 라우트 및 페이지 목록 (표)
3. 사용자 유형 분류
4. 시나리오 A-H (비로그인 2개, 로그인 4개, 관리자 2개)
5. 페이지별 주요 API 호출 요약 표
```
- 1~4단계에서 수집한 내용을 하나의 파일로 취합하여 `docs/user-scenarios.md`에 저장한다.
- 코드 수정 없이 문서만 생성한다.

---

## 수정/생성할 파일 목록

| 파일 경로 | 작업 유형 | 변경 내용 |
|-----------|-----------|-----------|
| `docs/user-scenarios.md` | 생성 | 라우트 목록 표, 비로그인·로그인·관리자 시나리오 8개, API 호출 요약 |

---

## 완료 체크리스트

- [ ] `docs/user-scenarios.md` 파일이 존재하고 열람 가능하다
- [ ] 라우트 목록 표에 10개 경로, 컴포넌트명, 접근 제한 여부, 설명이 모두 기재되어 있다
- [ ] 비로그인·로그인·관리자 사용자 유형이 명확히 구분되어 있다
- [ ] 친구 요청 흐름(요청 → 승인/거절)이 API 경로와 함께 기술되어 있다
- [ ] 게임 점수 반영 흐름(게임 오버 → POST monthly-scores)이 포함되어 있다
- [ ] 회원 탈퇴 확인 절차("회원 탈퇴" 텍스트 입력 → Dialog 확인)가 기술되어 있다
- [ ] 관리자 시나리오(회원 관리, 통계 조회)가 포함되어 있다
