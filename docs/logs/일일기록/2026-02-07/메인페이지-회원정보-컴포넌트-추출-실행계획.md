# 메인페이지 회원정보 컴포넌트 추출 실행계획

## 요구사항 요약

**요구사항**: Dashboard.jsx의 458~511줄에 해당하는 회원정보 컴포넌트(로그인 상태 분기 UI: 알림/메일 아이콘, 아바타 메뉴, 로그인/회원가입 버튼)를 새 컴포넌트 파일로 분리하여 AdminHeader.jsx에 넣는다.

**목적**: Dashboard와 Admin 페이지의 상단바에서 동일한 회원정보 UI를 재사용하기 위해 컴포넌트를 분리한다.

## 현재상태 분석

- Dashboard.jsx 458~511줄에 로그인 상태에 따라 분기하는 회원정보 UI가 인라인으로 존재
- 해당 UI는 `isLoggedIn`, `user`, `logout` (AuthContext), `navigate` (react-router), `anchorEl`, `avatarMenu` 상태를 사용
- AdminHeader.jsx의 `<Toolbar>` 내부가 비어 있어 컴포넌트를 넣을 위치가 명확함
- AdminPage.jsx는 AdminHeader를 포함하고 있어 별도 수정 불필요

## 구현 방법

Dashboard.jsx 458~511줄의 JSX와 관련 상태/함수를 새 파일 `HeaderUserInfo.jsx`로 추출한다. 이 컴포넌트는 AuthContext와 react-router를 자체적으로 사용하며, props 없이 독립 동작한다. AdminHeader.jsx의 Toolbar 안에 이 컴포넌트를 배치하고, Dashboard.jsx에서도 기존 인라인 코드를 이 컴포넌트로 교체한다.

## 구현 단계

### 1. HeaderUserInfo.jsx 컴포넌트 파일 생성

```jsx
// frontend/src/components/HeaderUserInfo.jsx
import { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import {
  Box, IconButton, Badge, Avatar, Typography,
  Button, Menu, MenuItem
} from '@mui/material';
import { Notifications, Mail } from '@mui/icons-material';
import { useAuth } from '../AuthContext';

function HeaderUserInfo() {
  const navigate = useNavigate();
  const { isLoggedIn, user, logout } = useAuth();

  const [anchorEl, setAnchorEl] = useState(null);
  const [avatarMenu, setAvatarMenu] = useState(false);

  function AvatarButtonClick(event) {
    setAnchorEl(event.currentTarget);
    setAvatarMenu(!avatarMenu);
  }

  function handleAvatarMenuClose() {
    setAnchorEl(null);
    setAvatarMenu(false);
  }

  function AvatarLogoutButton() {
    logout();
  }

  return (
    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
      {isLoggedIn ? (
        <>
          <IconButton onClick={() => navigate('/admin')}>
            <Badge>
              <Notifications />
            </Badge>
          </IconButton>
          <IconButton>
            <Badge>
              <Mail />
            </Badge>
          </IconButton>
          <Button id="basic-button" onClick={AvatarButtonClick}>
            <Avatar sx={{ width: 40, height: 40, ml: 1 }}>U</Avatar>
            <Typography>{user.name}</Typography>
          </Button>
          <Menu
            anchorEl={anchorEl}
            onClose={handleAvatarMenuClose}
            id="user-menu"
            open={avatarMenu}
          >
            <MenuItem>프로필</MenuItem>
            <MenuItem onClick={() => AvatarLogoutButton()}>로그아웃</MenuItem>
          </Menu>
        </>
      ) : (
        <>
          <Button variant="contained" onClick={() => navigate('/login')}>
            로그인
          </Button>
          <Button variant="outlined" onClick={() => navigate('/Register')}>
            회원가입
          </Button>
        </>
      )}
    </Box>
  );
}

export default HeaderUserInfo;
```
- **무엇을 하는가**: Dashboard.jsx에서 사용하던 회원정보 UI를 독립 컴포넌트로 분리
- AuthContext에서 `isLoggedIn`, `user`, `logout`을 자체적으로 가져와 props 없이 동작
- `anchorEl`, `avatarMenu` 상태와 관련 함수도 컴포넌트 내부로 이동
- Dashboard.jsx의 458~511줄 코드와 동일한 JSX 구조

### 2. AdminHeader.jsx에 HeaderUserInfo 배치

```jsx
// frontend/src/admin/AdminHeader.jsx
import { AppBar, Toolbar, Box } from '@mui/material';
import HeaderUserInfo from '../components/HeaderUserInfo';

const drawerWidth = 260;

function AdminHeader() {
  return (
    <AppBar
      position="fixed"
      sx={{
        width: { sm: `calc(100% - ${drawerWidth}px)` },
        ml: { sm: `${drawerWidth}px` },
        backgroundColor: '#ffffffff',
        color: '#1f2937',
        boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',
        borderBottom: '1px solid #e5e7eb',
      }}
    >
      <Toolbar sx={{ justifyContent: 'flex-end' }}>
        <HeaderUserInfo />
      </Toolbar>
    </AppBar>
  );
}

export default AdminHeader;
```
- **무엇을 하는가**: Admin 페이지 상단바에 회원정보 컴포넌트를 배치
- `justifyContent: 'flex-end'`로 Toolbar 우측에 정렬
- import 경로는 `../components/HeaderUserInfo`로 admin 폴더에서 상위로 이동

### 3. Dashboard.jsx에서 인라인 코드를 HeaderUserInfo로 교체

```jsx
// Dashboard.jsx 변경 사항

// import 추가
import HeaderUserInfo from './components/HeaderUserInfo';

// 458~511줄의 기존 인라인 코드를 다음으로 교체
<HeaderUserInfo />
```
- **무엇을 하는가**: Dashboard.jsx에서 중복되는 인라인 코드를 제거하고 새 컴포넌트로 교체
- Dashboard.jsx에서 `anchorEl`, `avatarMenu` 상태와 `AvatarButtonClick`, `handleAvatarMenuClose`, `AvatarLogoutButton` 함수는 HeaderUserInfo 내부로 이동했으므로 Dashboard.jsx에서 제거
- 기존과 동일한 동작을 유지

## 수정/생성할 파일 목록

| 파일 경로 | 작업 유형 | 변경 내용 |
|-----------|-----------|-----------|
| frontend/src/components/HeaderUserInfo.jsx | 생성 | 회원정보 UI 컴포넌트 새로 생성 |
| frontend/src/admin/AdminHeader.jsx | 수정 | HeaderUserInfo import 및 Toolbar 내부에 배치 |
| frontend/src/Dashboard.jsx | 수정 | 458~511줄 인라인 코드를 HeaderUserInfo로 교체, 불필요한 상태/함수 제거 |

## 완료 체크리스트

- [ ] Dashboard 페이지에서 로그인 상태일 때 알림/메일 아이콘, 아바타, 닉네임, 메뉴(프로필/로그아웃)가 표시되는지 확인
- [ ] Dashboard 페이지에서 비로그인 상태일 때 로그인/회원가입 버튼이 표시되는지 확인
- [ ] Admin 페이지(`/admin`) 상단바에 동일한 회원정보 UI가 표시되는지 확인
- [ ] Admin 페이지에서 로그아웃 버튼 클릭 시 정상 로그아웃 되는지 확인
- [ ] `npm run build` 실행 시 에러 없이 빌드 완료되는지 확인
