# 친구 페이지 보완 실행계획

## 요구사항 요약

**요구사항**:
1. FriendPageIntegration.test.jsx에서 'API 호출 중 로딩 표시가 나타난다' 테스트 및 대응 GREEN 코드 제거
2. 친구 요청 영역 리스트에 "요청ID"만 표시
3. 현재 친구 목록에 "친구 ID"만 표시

**목적**: 불필요한 로딩 테스트를 제거하고, 친구 요청/친구 목록의 표시 정보를 간소화한다.

## 현재상태 분석

- FriendPageIntegration.test.jsx 143~174행: 'API 호출 중 로딩 표시가 나타난다' 테스트가 존재
- FriendPage.jsx 233~238행: pendingLoading 시 CircularProgress + "로딩 중..." 표시 (친구 요청 영역)
- FriendPage.jsx 296~301행: friendLoading 시 CircularProgress + "로딩 중..." 표시 (현재 친구 영역)
- FriendPage.jsx 260~262행: 친구 요청 리스트에 `사용자 ID: ${request.requester_id}` (primary) + `요청 ID: ${request.id}` (secondary) 표시
- FriendPage.jsx 325~327행: 현재 친구 리스트에 `친구 ID: ${friendId}` (primary) + `관계 ID: ${friendship.id}` (secondary) 표시

## 구현 방법

- 테스트 파일에서 해당 테스트 케이스를 삭제한다.
- FriendPage.jsx에서 로딩 UI(CircularProgress + "로딩 중..." 텍스트)를 제거한다.
- FriendPage.jsx에서 친구 요청 리스트의 ListItemText를 `요청 ID: ${request.id}`만 표시하도록 변경한다.
- FriendPage.jsx에서 현재 친구 리스트의 ListItemText를 `친구 ID: ${friendId}`만 표시하도록 변경한다.

## 구현 단계

### Phase 1-1. FriendPageIntegration.test.jsx에서 로딩 테스트 제거

```jsx
// 삭제할 코드 (FriendPageIntegration.test.jsx 143~174행)
  it('API 호출 중 로딩 표시가 나타난다', async () => {
    // 지연된 Promise로 mock
    let resolvePending;
    let resolveAccepted;

    axios.get.mockImplementation((url, config) => {
      if (config?.params?.friend_status === 'pending') {
        return new Promise((resolve) => {
          resolvePending = resolve;
        });
      }
      if (config?.params?.friend_status === 'accepted') {
        return new Promise((resolve) => {
          resolveAccepted = resolve;
        });
      }
      return Promise.resolve({ data: { requests: [] } });
    });

    render(<FriendPage />);

    // 로딩 인디케이터가 표시되는지 확인 (CircularProgress 또는 "로딩 중..." 텍스트)
    await waitFor(() => {
      const loadingElement = screen.queryByText(/로딩|Loading/i) ||
                            document.querySelector('.MuiCircularProgress-root');
      expect(loadingElement).toBeInTheDocument();
    });

    // Promise resolve하여 로딩 종료
    resolvePending({ data: { requests: [] } });
    resolveAccepted({ data: { requests: [] } });
  });
```
- FriendPageIntegration.test.jsx의 '로딩 및 에러 상태' describe 블록 안에 있는 'API 호출 중 로딩 표시가 나타난다' it 블록 전체를 삭제한다.

### Phase 1-2. FriendPage.jsx에서 로딩 UI 제거

```jsx
// 삭제할 코드 1 (FriendPage.jsx 233~238행 - 친구 요청 영역 로딩)
          {pendingLoading && (
              <Box sx={{ display: 'flex', justifyContent: 'center', p: 2 }}>
                <CircularProgress size={24} />
                <Typography sx={{ ml: 2 }}>로딩 중...</Typography>
              </Box>
            )}
```
- 친구 요청 섹션의 로딩 UI를 삭제한다.

```jsx
// 삭제할 코드 2 (FriendPage.jsx 296~301행 - 현재 친구 영역 로딩)
            {friendLoading && (
              <Box sx={{ display: 'flex', justifyContent: 'center', p: 2 }}>
                <CircularProgress size={24} />
                <Typography sx={{ ml: 2 }}>로딩 중...</Typography>
              </Box>
            )}
```
- 현재 친구 섹션의 로딩 UI를 삭제한다.

```jsx
// 삭제할 코드 3 (FriendPage.jsx 11행 - CircularProgress import)
// 변경 전
import {
  Box,
  Paper,
  TextField,
  Button,
  List,
  ListItem,
  ListItemText,
  Typography,
  CircularProgress,
  Alert,
  Divider
} from '@mui/material';

// 변경 후
import {
  Box,
  Paper,
  TextField,
  Button,
  List,
  ListItem,
  ListItemText,
  Typography,
  Alert,
  Divider
} from '@mui/material';
```
- CircularProgress를 더 이상 사용하지 않으므로 import에서 제거한다.

### Phase 2-1. 친구 요청 영역에 "요청ID"만 표시

```jsx
// 변경 전 (FriendPage.jsx 260~263행)
                    <ListItemText
                      primary={`사용자 ID: ${request.requester_id}`}
                      secondary={`요청 ID: ${request.id}`}
                    />

// 변경 후
                    <ListItemText
                      primary={`요청 ID: ${request.id}`}
                    />
```
- 친구 요청 리스트의 ListItemText에서 primary를 `요청 ID: ${request.id}`로 변경하고, secondary를 제거한다.

### Phase 2-2. 현재 친구 목록에 "친구 ID"만 표시

```jsx
// 변경 전 (FriendPage.jsx 325~328행)
                      <ListItemText
                        primary={`친구 ID: ${friendId}`}
                        secondary={`관계 ID: ${friendship.id}`}
                      />

// 변경 후
                      <ListItemText
                        primary={`친구 ID: ${friendId}`}
                      />
```
- 현재 친구 리스트의 ListItemText에서 secondary(`관계 ID`)를 제거하고, primary(`친구 ID`)만 유지한다.

## 수정/생성할 파일 목록

| 파일 경로 | 작업 유형 | 변경 내용 |
|-----------|-----------|-----------|
| frontend/src/test/FriendPageIntegration.test.jsx | 수정 | 'API 호출 중 로딩 표시가 나타난다' 테스트 케이스 삭제 |
| frontend/src/FriendPage.jsx | 수정 | 로딩 UI 2곳 삭제, CircularProgress import 제거, 친구 요청 ListItemText 변경, 현재 친구 ListItemText 변경 |

## 완료 체크리스트

- [ ] FriendPageIntegration.test.jsx에서 'API 호출 중 로딩 표시가 나타난다' 테스트가 삭제되었는지 확인
- [ ] FriendPage.jsx에서 CircularProgress와 "로딩 중..." 텍스트가 모두 제거되었는지 확인
- [ ] 친구 요청 영역 리스트에 "요청 ID"만 표시되는지 확인
- [ ] 현재 친구 영역 리스트에 "친구 ID"만 표시되는지 확인
- [ ] `npm run test` 실행 시 모든 테스트가 통과하는지 확인
