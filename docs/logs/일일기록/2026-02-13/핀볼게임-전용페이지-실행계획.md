# 핀볼게임 전용 페이지 분리 실행계획

## 요구사항 요약

**요구사항**: 핀볼 게임을 Dashboard 내부 탭에서 꺼내어 `/pinball` 독립 경로를 가진 전용 페이지로 분리한다.

**목적**: 현재 Dashboard의 사이드바(260px)와 AppBar가 게임 영역을 압박해 게임 캔버스(700px)가 좁은 공간에 표시된다. 전용 페이지를 만들면 전체 화면을 게임에 사용할 수 있다.

---

## 현재상태 분석

- `App.jsx`: `/Pinball_test` 경로에 `<Pinball />` 단독 렌더링 라우트가 이미 존재하나 임시 테스트용 경로임
- `Dashboard.jsx`: `showPinball` state로 `<Pinball />`을 조건부 렌더링. 사이드바 메뉴 "게임하기" 클릭 시 표시
- `Pinball.jsx`: 700×1200px 고정 캔버스, 자체 스케일 계산(`gameScale`), 사운드/목숨/점수 UI 포함
- `HomePage.jsx`: "게임하기" 버튼이 `/dashboard`로 이동함
- 문제: Dashboard의 `<Container maxWidth="xl">` 안에 핀볼이 삽입되어 좌우 여백과 사이드바로 게임 공간이 협소함

---

## 구현 방법

- **신규 페이지 파일 생성**: `frontend/src/pages/PinballPage/` 디렉토리에 `PinballPage.jsx`와 `index.js` 생성
- **레이아웃**: 얇은 상단 헤더(홈 버튼 + 유저정보) + 전체 너비 게임 영역 2단 구성
- **라우팅**: `App.jsx`에 `/pinball` 경로 추가
- **진입점 변경**: Dashboard 사이드바 "게임하기"와 HomePage "게임하기" 버튼을 `/pinball`로 연결
- **Dashboard 정리**: `showPinball` 관련 state·분기 제거, Pinball import 제거

---

## 레이아웃 (아스키아트)

```
데스크탑 (전체 화면)
┌──────────────────────────────────────────────┐
│  [🏠 홈]                        [유저정보]   │  ← 헤더 (높이 56px, 배경 #1E293B)
├──────────────────────────────────────────────┤
│                                              │
│          ┌──────────────────┐                │
│          │                  │                │
│          │   핀볼 캔버스     │                │
│          │   (700 × 1200)   │                │
│          │   gameScale 적용  │                │
│          │                  │                │
│          └──────────────────┘                │
│                                              │
└──────────────────────────────────────────────┘
배경: #0F172A (다크), 캔버스는 수평 중앙 정렬

모바일 (전체 화면)
┌──────────────────┐
│ [🏠]          [U]│  ← 헤더
├──────────────────┤
│                  │
│  핀볼 캔버스      │
│  (gameScale 축소) │
│                  │
│ [L] [SPACE] [R]  │  ← 터치 버튼 (Pinball.jsx 내장)
└──────────────────┘
```

---

## 구현 단계

### 1. PinballPage.jsx 생성

```jsx
// frontend/src/pages/PinballPage/PinballPage.jsx
import { useNavigate } from 'react-router-dom';
import { Box, AppBar, Toolbar, IconButton } from '@mui/material';
import HomeIcon from '@mui/icons-material/Home';
import Pinball from '../Pinball';
import HeaderUserInfo from '../../components/HeaderUserInfo';

function PinballPage() {
  const navigate = useNavigate();

  return (
    <Box sx={{ display: 'flex', flexDirection: 'column', minHeight: '100vh', backgroundColor: '#0F172A' }}>
      {/* 상단 헤더 */}
      <AppBar position="static" sx={{ backgroundColor: '#1E293B', boxShadow: 'none', borderBottom: '1px solid #334155' }}>
        <Toolbar sx={{ justifyContent: 'space-between' }}>
          <IconButton onClick={() => navigate('/')} sx={{ color: '#F1F5F9' }}>
            <HomeIcon />
          </IconButton>
          <HeaderUserInfo />
        </Toolbar>
      </AppBar>

      {/* 게임 영역 */}
      <Box sx={{ flexGrow: 1, display: 'flex', justifyContent: 'center', alignItems: 'flex-start', pt: 2 }}>
        <Pinball />
      </Box>
    </Box>
  );
}

export default PinballPage;
```

- **무엇을 하는가**: 핀볼 전용 독립 페이지. 헤더 + 게임 캔버스 2단 레이아웃을 구성
- `navigate('/')`: 홈(`/`) 경로로 이동. 어디서 왔든 항상 홈으로 돌아감
- `HomeIcon`: `ArrowBackIcon` 대신 집 모양 아이콘으로 홈 이동임을 명확히 표시
- `backgroundColor: '#0F172A'`: HomePage와 동일한 다크 배경으로 시각적 일관성 유지
- `alignItems: 'flex-start'`: 캔버스를 상단 정렬하여 스크롤 가능하게 함

### 2. index.js 생성

```js
// frontend/src/pages/PinballPage/index.js
export { default } from './PinballPage';
```

- **무엇을 하는가**: `import PinballPage from '../PinballPage'` 형식의 단축 import를 가능하게 함
- 프로젝트 내 다른 페이지(`Dashboard/index.js` 등)와 동일한 패턴 적용

### 3. App.jsx 라우트 추가

```jsx
// frontend/src/App.jsx 수정
import PinballPage from './pages/PinballPage';

// <Routes> 안에 추가
<Route path="/pinball" element={<PinballPage />} />
// 기존 /Pinball_test 라우트는 삭제
```

- **무엇을 하는가**: `/pinball` URL 접근 시 `PinballPage` 컴포넌트를 렌더링하도록 라우팅 등록
- 기존 `/Pinball_test`는 임시 테스트 경로이므로 삭제하여 중복 제거

### 4. Dashboard.jsx 수정 — 핀볼 분리

```jsx
// frontend/src/pages/Dashboard/Dashboard.jsx

// 삭제할 import
// import Pinball from '../Pinball';  ← 삭제

// 삭제할 state
// const [showPinball, setShowPinball] = useState(true);  ← 삭제

// handleMenuClick 내 '게임하기' 분기 수정
if (itemtext == '게임하기') {
  navigate('/pinball');  // 기존 setShowPinball(true) 대신 navigate
}

// 렌더링 부분 수정
// 기존: {showPinball ? <Pinball /> : showUserInfo ? <UserInfo /> : showFriend ? <FriendPage /> : null}
// 변경: {showUserInfo ? <UserInfo /> : showFriend ? <FriendPage /> : null}
```

- **무엇을 하는가**: Dashboard에서 Pinball 의존성을 완전히 제거하고 "게임하기" 클릭 시 `/pinball`로 이동
- `showPinball` state 제거로 Dashboard 초기 표시 상태가 빈 화면이 되므로 기본값을 `null`로 유지하거나 대시보드 안내 화면 추가 가능

### 5. HomePage.jsx 버튼 경로 변경

```jsx
// frontend/src/pages/HomePage/HomePage.jsx

// navigate('/dashboard') → navigate('/pinball') 으로 변경 (2곳)
<Button onClick={() => navigate('/pinball')}>게임하기</Button>

<Button onClick={() => navigate('/pinball')}>▶ 지금 바로 플레이하기</Button>
```

- **무엇을 하는가**: 홈페이지에서 게임으로 직행하는 버튼들이 전용 페이지로 연결되도록 변경
- Dashboard를 거치지 않으므로 불필요한 페이지 이동 단계를 제거

---

## 수정/생성할 파일 목록

| 파일 경로 | 작업 유형 | 변경 내용 |
|-----------|-----------|-----------|
| `frontend/src/pages/PinballPage/PinballPage.jsx` | 생성 | 핀볼 전용 페이지 컴포넌트 |
| `frontend/src/pages/PinballPage/index.js` | 생성 | 단축 export |
| `frontend/src/App.jsx` | 수정 | `/pinball` 라우트 추가, `/Pinball_test` 라우트 삭제, PinballPage import 추가 |
| `frontend/src/pages/Dashboard/Dashboard.jsx` | 수정 | Pinball import 삭제, showPinball state 삭제, "게임하기" 클릭 시 navigate('/pinball') |
| `frontend/src/pages/HomePage/HomePage.jsx` | 수정 | "게임하기" 버튼 2곳의 navigate 대상을 `/pinball`로 변경 |

---

## 완료 체크리스트

- [ ] `/pinball` URL 직접 입력 시 핀볼 게임 페이지가 표시된다
- [ ] 핀볼 페이지 상단 헤더의 홈 버튼 클릭 시 `/`(홈 페이지)로 이동한다
- [ ] HomePage "▶ 지금 바로 플레이하기" 버튼 클릭 시 `/pinball`로 이동한다
- [ ] Dashboard 사이드바 "게임하기" 클릭 시 `/pinball`로 이동한다
- [ ] `/Pinball_test` 경로 접근 시 404 또는 리다이렉트된다 (라우트 삭제 확인)
- [ ] 핀볼 페이지에서 게임이 정상적으로 동작한다 (공 발사, 플리퍼, 점수 기록)
- [ ] 모바일 기기에서 터치 버튼이 표시되고 정상 동작한다
- [ ] 로그인/비로그인 상태 모두에서 헤더 유저 정보가 올바르게 표시된다
